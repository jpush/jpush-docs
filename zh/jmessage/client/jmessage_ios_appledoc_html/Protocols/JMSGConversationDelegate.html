<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>JMSGConversationDelegate Protocol Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">JMessage-iOS-SDK </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">HXHG</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	

	

	
	<optgroup label="Instance Methods">
		
		<option value="//api/name/onConversationChanged:">- onConversationChanged:</option>
		
		<option value="//api/name/onUnreadChanged:">- onUnreadChanged:</option>
		
		<option value="//api/name/onSyncOfflineMessageConversation:offlineMessages:">- onSyncOfflineMessageConversation:offlineMessages:</option>
		
		<option value="//api/name/onSyncRoamingMessageConversation:">- onSyncRoamingMessageConversation:</option>
		
	</optgroup>
	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">JMSGConversationDelegate Protocol Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Conforms to</th>
	<td>NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>JMSGConversationDelegate.h</td>
</tr>
						</tbody></table></div>
					

                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>会话相关变更通知</p>
					</div>
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						
						

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/onConversationChanged:" title="onConversationChanged:"></a>
	<h3 class="method-title"><code><a href="#//api/name/onConversationChanged:">&ndash;&nbsp;onConversationChanged:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>会话信息变更通知</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)onConversationChanged:(JMSGConversation *)<em>conversation</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>conversation</code></th>
						<td><p>变更后的会话对象</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>当前有二个属性: 会话标题(title), 会话图标</p>

<p>收到此通知后, 建议处理: 如果 App 当前在会话列表页，刷新整个列表；如果在聊天界面，刷新聊天标题。</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">JMSGConversationDelegate.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/onUnreadChanged:" title="onUnreadChanged:"></a>
	<h3 class="method-title"><code><a href="#//api/name/onUnreadChanged:">&ndash;&nbsp;onUnreadChanged:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>当前剩余的全局未读数</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)onUnreadChanged:(NSUInteger)<em>newCount</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>newCount</code></th>
						<td><p>变更后的数量</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">JMSGConversationDelegate.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/onSyncOfflineMessageConversation:offlineMessages:" title="onSyncOfflineMessageConversation:offlineMessages:"></a>
	<h3 class="method-title"><code><a href="#//api/name/onSyncOfflineMessageConversation:offlineMessages:">&ndash;&nbsp;onSyncOfflineMessageConversation:offlineMessages:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>同步离线消息、离线事件通知</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)onSyncOfflineMessageConversation:(JMSGConversation *)<em>conversation</em> offlineMessages:(NSArray JMSG_GENERIC ( __kindof JMSGMessage *) *)<em>offlineMessages</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>conversation</code></th>
						<td><p>同步离线消息的会话</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>offlineMessages</code></th>
						<td><p>离线消息、离线事件数组</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>注意：</p>

<p>SDK 会将消息下发分为在线下发和离线下发两种情况,
其中用户在离线状态(包括用户登出或者网络断开)期间所收到的消息我们称之为离线消息.</p>

<p>当用户上线收到这部分离线消息后,这里的处理与之前版本不同的是:</p>

<p>3.1.0 版本之前: SDK 会和在线时收到的消息一样,每收到一条消息都会上抛一个在线消息 <a href="../Classes/JMSGMessage.html">JMSGMessage</a> 来通知上层.</p>

<p>3.1.0 版本之后: SDK 会以会话为单位，不管该会话有多少离线消息，SDK同步完成后每个会话只上抛一次.</p>

<p>3.2.1 版本之后: SDK 会以会话为单位，不管该会话有多少离线事件，SDK同步完成后每个会话只上抛一次</p>

<p>注意：一个会话最多触发两次这个代理，即：离线消息和离线事件各一次,这样会大大减轻上层在收到消息刷新 UI 的压力.</p>

<p>上层通过此代理方法监听离线消息同步的会话,详见官方文档.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">JMSGConversationDelegate.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/onSyncRoamingMessageConversation:" title="onSyncRoamingMessageConversation:"></a>
	<h3 class="method-title"><code><a href="#//api/name/onSyncRoamingMessageConversation:">&ndash;&nbsp;onSyncRoamingMessageConversation:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>同步漫游消息通知</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)onSyncRoamingMessageConversation:(JMSGConversation *)<em>conversation</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>conversation</code></th>
						<td><p>同步漫游消息的会话</p></td>
					</tr>
				
				</table>
			</div>
			

			

			
			<div class="method-subsection availability">
				<h4 class="method-subtitle parameter-title">Availability</h4>
				<p>3.1.0</p>
			</div>
			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>注意：</p>

<p>当 SDK 触发此函数时，说明该会话有同步下漫游消息，并且已经存储到本地数据库中，
上层可通过 <a href="../Classes/JMSGConversation.html">JMSGConversation</a> 类中的获取message的方法刷新UI.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">JMSGConversationDelegate.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2017 HXHG. All rights reserved. Updated: 2017-09-29</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>